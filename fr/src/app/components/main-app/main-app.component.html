<div class="retro-app">
  <!-- Retro CRT Header -->
  <header class="crt-header">
    <div class="scan-lines"></div>
    <div class="header-content">
      <div class="terminal-title">
        <span class="cursor">█</span>
        <span class="typing-text">DOCUMENT LABEL SYSTEM v3.14</span>
        <span class="blinking-cursor">_</span>
      </div>
      
      <div class="control-panel">
        <button 
          class="retro-button"
          [class.active]="!isSearchMode()"
          (click)="toggleSearchMode()"
          [attr.aria-label]="isSearchMode() ? 'Switch to upload mode' : 'Switch to search mode'">
          <div class="button-face">
            <i [class]="isSearchMode() ? 'fas fa-upload' : 'fas fa-search'"></i>
            <span>{{ isSearchMode() ? 'UPLOAD.EXE' : 'SEARCH.EXE' }}</span>
          </div>
          <div class="button-shadow"></div>
        </button>

        <!-- REBOOT BUTONU -->
        <button 
          class="retro-button reboot-button"
          (click)="rebootSystem()"
          title="Reboot System">
          <div class="button-face">
            <i class="fas fa-power-off"></i>
            <span>REBOOT.EXE</span>
          </div>
          <div class="button-shadow"></div>
        </button>
        
        <div class="status-lights">
          <div class="led" [class.on]="!isSearchMode()"></div>
          <div class="led" [class.on]="isSearchMode()"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Terminal Window -->
  <main class="terminal-main">
    <div class="terminal-window">
      <div class="window-chrome">
        <div class="title-bar">
          <span class="window-title">
            {{ isSearchMode() ? 'DOCUMENT_SEARCH.BAT' : 'FILE_UPLOAD.EXE' }}
          </span>
          <div class="window-controls">
            <span class="minimize">-</span>
            <span class="maximize">□</span>
            <span class="close">×</span>
          </div>
        </div>
      </div>

      <div class="terminal-content">
        <!-- Upload Mode -->
        <section class="mode-section upload-mode" *ngIf="!isSearchMode()">
          <div class="console-header">
            <div class="prompt-line">
              <span class="prompt">C:\DOCS&gt;</span>
              <span class="command">UPLOAD_ANALYZER.EXE</span>
              <span class="blinking">█</span>
            </div>
          </div>
          
          <div class="retro-card upload-zone">
            <div class="card-header">
              <span class="card-title">[FILE UPLOAD SYSTEM v2.1]</span>
            </div>
            <div class="card-content">
              <!-- FileUploadComponent'i doğrudan kullan -->
              <app-file-upload
                (fileUploaded)="onFileUploaded($event)"
                (analysisCompleted)="onAnalysisCompleted($event)"
                (uploadError)="onUploadError($event)">
              </app-file-upload>
            </div>
          </div>

          <!-- Analysis Results -->
          <div class="retro-card analysis-results" *ngIf="currentAnalysis()">
            <div class="card-header">
              <span class="card-title">[ANALYSIS COMPLETE]</span>
              <span class="status-indicator success">●</span>
            </div>
            <div class="card-content">
              <app-document-analysis
                [analysisResult]="currentAnalysis()!"
                [originalContent]="originalContent()"
                [file]="uploadedFile()"
                (labelsUpdated)="onLabelsUpdated($event)"
                (saveCompleted)="onSaveCompleted($event)"
                (closeAnalysis)="onCloseAnalysis()">
              </app-document-analysis>
            </div>
          </div>
        </section>

        <!-- Search Mode -->
        <section class="mode-section search-mode" *ngIf="isSearchMode()">
          <div class="console-header">
            <div class="prompt-line">
              <span class="prompt">C:\SEARCH&gt;</span>
              <span class="command">FIND_DOCUMENTS.EXE</span>
              <span class="blinking">█</span>
            </div>
          </div>
          
          <div class="retro-card search-zone">
            <div class="card-header">
              <span class="card-title">[DOCUMENT SEARCH ENGINE v1.3]</span>
            </div>
            <div class="card-content">
              <app-file-search
                (searchResults)="onSearchResults($event)"
                (searchError)="onSearchError($event)"
                (resultSelected)="onSearchResultSelected($event)">
              </app-file-search>
            </div>
          </div>

          <!-- Search Results Analysis -->
          <div class="retro-card search-results" *ngIf="currentAnalysis()">
            <div class="card-header">
              <span class="card-title">[SEARCH RESULT VIEWER]</span>
              <span class="status-indicator info">●</span>
            </div>
            <div class="card-content">
              <div class="analysis-content">
                <p><strong>Selected Document:</strong></p>
                <pre>{{ currentAnalysis() | json }}</pre>
                <button class="retro-btn secondary" (click)="onCloseAnalysis()">
                  <i class="fas fa-times"></i> Close Analysis
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Empty State -->
        <div class="empty-terminal" *ngIf="!currentAnalysis() && searchResults().length === 0">
          <div class="boot-sequence">
            <div class="boot-line">DOCUMENT LABEL SYSTEM v3.14</div>
            <div class="boot-line">Copyright (c) 2024 RetroSoft Inc.</div>
            <div class="boot-line">Initializing...</div>
            <div class="boot-line"></div>
            <div class="boot-line">
              {{ isSearchMode() 
                 ? 'SEARCH ENGINE READY. ENTER QUERY TO BEGIN...'
                 : 'FILE UPLOAD SYSTEM READY. DROP FILES TO ANALYZE...' }}
            </div>
            <div class="boot-line"></div>
            <div class="prompt-ready">
              <span class="prompt">READY&gt;</span>
              <span class="blinking-cursor">█</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Retro Footer Status Bar -->
  <footer class="status-bar">
    <div class="status-segment">
      <span class="status-label">MODE:</span>
      <span class="status-value">{{ isSearchMode() ? 'SEARCH' : 'UPLOAD' }}</span>
    </div>
    <div class="status-segment">
      <span class="status-label">STATUS:</span>
      <span class="status-value" [class.active]="currentAnalysis()">
        {{ currentAnalysis() ? 'PROCESSING' : 'READY' }}
      </span>
    </div>
    <div class="status-segment">
      <span class="status-label">TIME:</span>
      <span class="status-value">{{ currentTime }}</span>
    </div>
    <div class="status-segment">
      <span class="status-label">SYS:</span>
      <span class="status-value">OK</span>
    </div>
  </footer>

  <!-- Retro Effects -->
  <div class="retro-effects">
    <div class="crt-flicker"></div>
    <div class="static-noise"></div>
  </div>
</div>