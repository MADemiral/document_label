<div class="file-upload-container">
  <!-- Upload Area -->
  <div 
    class="upload-section"
    [class.drag-over]="isDragOver()"
    [class.uploading]="isUploading()">
    
    <div 
      class="upload-area"
      (click)="triggerFileInput()"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)">
      
      <!-- Upload Icon -->
      <div class="upload-icon">
        <i class="fas fa-cloud-upload-alt" *ngIf="!isUploading()"></i>
        <i class="fas fa-spinner fa-spin" *ngIf="isUploading()"></i>
      </div>
      
      <!-- Upload Text -->
      <div class="upload-text">
        <ng-container *ngIf="!isUploading()">
          <strong>Dosyaları buraya sürükleyin</strong> veya <span class="click-text">tıklayın</span>
        </ng-container>
        <ng-container *ngIf="isUploading()">
          Dosyalar yükleniyor...
        </ng-container>
      </div>
      
      <!-- Upload Hint -->
      <div class="upload-hint" *ngIf="!isUploading()">
        PDF, DOC, DOCX, TXT, XLS, XLSX, PPT, PPTX (Maksimum {{formatFileSize(maxFileSize)}})
      </div>
      
      <!-- Progress Bar -->
      <div class="progress-container" *ngIf="isUploading()">
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            [style.width.%]="uploadProgress()">
          </div>
        </div>
        <div class="progress-text">{{Math.round(uploadProgress())}}%</div>
      </div>
      
      <!-- Hidden File Input -->
      <input 
        #fileInput
        type="file" 
        class="file-input" 
        multiple 
        [accept]="allowedExtensions.join(',')"
        (change)="onFileSelect($event)">
    </div>
  </div>

  <!-- Upload Status -->
  <div class="upload-status" *ngIf="uploadedFiles().length > 0 || isUploading()">
    <div class="status-header">
      <div class="status-text">
        <i class="fas fa-info-circle"></i>
        {{getUploadStatusText()}}
      </div>
      <button 
        class="clear-all-btn"
        *ngIf="uploadedFiles().length > 0 && !isUploading() && processingFiles().size === 0"
        (click)="clearAllFiles()"
        title="Tüm dosyaları temizle">
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>

  <!-- Uploaded Files List -->
  <div class="uploaded-files" *ngIf="uploadedFiles().length > 0">
    <div class="files-header">
      <h3>Yüklenen Dosyalar</h3>
      <span class="files-count">{{uploadedFiles().length}} dosya</span>
    </div>
    
    <div class="files-list">
      <div 
        class="uploaded-file" 
        *ngFor="let fileData of uploadedFiles(); trackBy: trackByFileId"
        [class.processing]="fileData.isProcessing">
        
        <!-- File Icon -->
        <div class="file-icon-container">
          <i [class]="getFileIcon(fileData.file.name)" *ngIf="!fileData.isProcessing"></i>
          <i class="fas fa-spinner fa-spin text-blue-500" *ngIf="fileData.isProcessing"></i>
        </div>
        
        <!-- File Info -->
        <div class="file-info">
          <div class="file-name" [title]="fileData.file.name">
            {{fileData.file.name}}
          </div>
          <div class="file-details">
            <span class="file-size">{{formatFileSize(fileData.file.size)}}</span>
            <span class="file-separator">•</span>
            <span class="upload-date">{{fileData.uploadDate | date:'dd.MM.yyyy HH:mm'}}</span>
            <span class="file-separator">•</span>
            <span class="file-status" [class.processing]="fileData.isProcessing" [class.completed]="fileData.content">
              {{getFileStatus(fileData)}}
            </span>
          </div>
        </div>
        
        <!-- File Actions -->
        <div class="file-actions">
          <button 
            class="remove-btn"
            *ngIf="!fileData.isProcessing"
            (click)="removeFile(fileData.id)"
            title="Dosyayı kaldır">
            <i class="fas fa-times"></i>
          </button>
          <div class="processing-indicator" *ngIf="fileData.isProcessing">
            <i class="fas fa-cog fa-spin"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Upload Tips -->
  <div class="upload-tips" *ngIf="uploadedFiles().length === 0 && !isUploading()">
    <div class="tips-header">
      <i class="fas fa-lightbulb"></i>
      <span>İpuçları</span>
    </div>
    <ul class="tips-list">
      <li>Birden fazla dosyayı aynı anda seçebilirsiniz</li>
      <li>Dosyaları doğrudan sürükleyip bırakabilirsiniz</li>
      <li>Desteklenen formatlar: PDF, Word, Excel, PowerPoint, Metin</li>
      <li>Maksimum dosya boyutu: {{formatFileSize(maxFileSize)}}</li>
      <li>Dosyalar otomatik olarak içerik analizi için işlenir</li>
    </ul>
  </div>
</div>

<!-- Track by function for performance -->
<ng-container>
  <!-- This is a template-only function for trackBy -->
</ng-container>